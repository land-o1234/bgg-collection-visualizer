# Board Game Collection Visualizer (Web App)

This is a static web app that visualizes your BoardGameGeek (BGG) collection as an interactive graph with search and a details sidebar.

- Frontend: Pure HTML/JS/CSS (no backend required at runtime)
- Data: Precomputed JSON (`docs/data/nodes.json`, `docs/data/edges.json`, `docs/data/recs.json`) built by a Python script using the BGG XML API.

## Features
- Interactive graph (pan, zoom, drag)
- Click a game to see:
  - Mechanics, categories, rating, weight, players, playtime
  - Directly related games (graph neighbors) with similarity edge weights
  - **NEW**: Personalized recommendations for non-owned games
- Search by game name (highlights and selects)
- **NEW**: Automated recommendation generation using search-based candidate discovery

## Generate data (one-time or whenever your collection changes)

1) Install Python deps:
```
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
# or: .venv\Scripts\activate  # Windows
pip install -r requirements.txt
```

2) Generate JSON for your username:
```
python src/generate_data.py --username YourBGGUsername --edge-threshold 0.35 --out-dir docs/data
```

This creates:
- `docs/data/nodes.json`: games in your collection with their attributes
- `docs/data/edges.json`: pairwise similarity edges above threshold
- `docs/data/recs.json`: personalized recommendations for each owned game

3) Open the web app:
- Serve the static files: `python -m http.server -d . 8000` then go to http://localhost:8000/static/
- Or deploy to GitHub Pages (see below)

## Deploy (GitHub Pages)

1. **Enable GitHub Pages**: Go to repository Settings → Pages → Source: "Deploy from a branch" → Branch: "main" → Folder: "/ (root)"

2. **Automated Updates**: The included GitHub Actions workflow (`.github/workflows/generate-data.yml`) can:
   - Run daily to update your collection data automatically
   - Be triggered manually with custom parameters
   - Commit updated JSON files to keep your visualization current

3. **Access your visualization**: Your site will be available at `https://yourusername.github.io/your-repo-name/static/`

## Implementation Details

### Core Components

**BGG API Client (`src/bgg.py`)**:
- Handles BGG XML API calls with retry logic and rate limiting
- Fetches user collections, game details, and search results
- Robust error handling for BGG's sometimes-slow API

**Similarity Engine (`src/similarity.py`)**:
- Computes game similarities using weighted combination:
  - 50% Jaccard similarity of mechanics
  - 30% Jaccard similarity of categories  
  - 20% Cosine similarity of numeric features (rating, weight, time, players)
- Generates similarity edges above configurable threshold

**Recommendation System**:
- Searches BGG for candidate games using configurable search terms
- Fetches detailed information for candidates
- Computes cross-similarities between owned and candidate games
- Generates top-K recommendations for each owned game

**Interactive Visualization**:
- Cytoscape.js-powered graph with physics simulation
- Search, filtering, and detail sidebar
- Responsive design with dark theme

### Data Flow

1. **Collection Fetch**: Retrieve user's owned games (excluding expansions)
2. **Detail Enrichment**: Fetch full game details including mechanics, categories, ratings
3. **Similarity Computation**: Calculate pairwise similarities and filter by threshold
4. **Recommendation Generation**: Search for candidates and compute cross-similarities
5. **JSON Export**: Generate `nodes.json`, `edges.json`, and `recs.json`
6. **Visualization**: Load data in interactive web app

## Notes
- Direct browser calls to BGG are blocked by CORS and can be slow; this design avoids that by precomputing data.
- Recommendations are generated by searching BGG for games with relevant tags/mechanics and computing similarities.
- The system is designed to work as a zero-backend static site suitable for GitHub Pages.

## License
MIT